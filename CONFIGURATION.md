# ⚙️ Configuration Files Reference

> **Complete guide to all configuration files in Kensho**

This document explains the purpose and settings of every configuration file in the project root.

---

## 1. Environment & Runtime

### `.env.example`
**Purpose**: Template for environment variables.

**Variables**:
```bash
# Execution mode
VITE_MODE=full          # "full" (with AI) or "lite" (without AI for fast testing)

# LLM auto-loading
VITE_LLM_AUTOLOAD=true  # Load model at startup (true) or lazy load (false)
```

**Usage**: Copy to `.env` and customize for your environment.

---

## 2. Package Management

### `package.json`
**Purpose**: Project metadata and dependencies.

**Key Fields**:
-   **name**: `kensho`
-   **version**: `1.0.0`
-   **license**: MIT
-   **type**: `module` (ES Modules)

**Scripts**: See [DEVELOPER_GUIDE.md](./DEVELOPER_GUIDE.md#7-available-scripts)

### `package-lock.json`
**Purpose**: Locked dependency tree for npm.
-   Ensures reproducible builds.
-   Generated automatically by `npm install`.

### `bun.lock` & `bun.lockb`
**Purpose**: Locked dependency files for Bun package manager.
-   `bun.lock`: Human-readable (JSON).
-   `bun.lockb`: Binary format (faster).
-   Generated by `bun install`.

---

## 3. TypeScript Configuration

### `tsconfig.json`
**Purpose**: Root TypeScript configuration.

**Key Settings**:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "jsx": "react-jsx",
    "strict": false,           // ⚠️ CRITICAL: Should be true in production
    "noImplicitAny": false,    // ⚠️ Should be true
    "strictNullChecks": false, // ⚠️ Should be true
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]       // Path alias: import from '@/components'
    }
  }
}
```

**⚠️ Known Issues**:
-   **Strict mode is disabled**. This is a technical debt item. See [PROJECT_STATUS.md](./PROJECT_STATUS.md#3-risks--mitigations).

---

## 4. Build & Bundler

### `vite.config.ts`
**Purpose**: Vite build configuration.

**Key Features**:
-   React SWC plugin for fast refresh.
-   Path aliases (`@/` → `src/`).
-   Multiple build modes (`test-agents`, `remote-agents`).
-   Worker optimization.

**Build Modes**:
```bash
npm run build                # Production (full LLM)
npm run build:test-agents    # Test mode (agent stubs)
npm run build:remote-agents  # WebSocket mode (relay required)
```

### `vitest.config.ts`
**Purpose**: Test runner configuration.

**Settings**:
-   Environment: `happy-dom` (browser simulation).
-   Setup file: `tests/setup/vitest-setup.ts`.
-   Coverage: v8 provider.

---

## 5. Code Quality

### `eslint.config.js`
**Purpose**: ESLint linting rules.

**Plugins**:
-   `@eslint/js`: Base rules.
-   `typescript-eslint`: TypeScript-specific rules.
-   `eslint-plugin-react-hooks`: React Hooks rules.
-   `eslint-plugin-react-refresh`: Fast Refresh compatibility.

**Custom Rules**:
-   `no-unused-vars`: Warning (not error).
-   `react-refresh/only-export-components`: Warning.

### `.prettierrc.json`
**Purpose**: Code formatting rules.

**Settings**:
```json
{
  "semi": true,              // Always use semicolons
  "singleQuote": true,       // Use ' instead of "
  "printWidth": 100,         // Max line length
  "tabWidth": 2,             // 2 spaces per indent
  "trailingComma": "es5",    // Add trailing commas where valid in ES5
  "endOfLine": "lf"          // Unix line endings
}
```

### `.prettierignore`
**Purpose**: Files/folders excluded from Prettier formatting.

**Excluded**:
-   `node_modules/`, `dist/`, `build/`
-   `*.lock`, `*.lockb`
-   Generated files

---

## 6. Git & Version Control

### `.gitignore`
**Purpose**: Files excluded from Git tracking.

**Categories**:
-   **Dependencies**: `node_modules/`, `.pnp.js`
-   **Build outputs**: `dist/`, `build/`, `.next/`
-   **Environment**: `.env*`
-   **Cache**: `.cache`, `.eslintcache`
-   **OS files**: `.DS_Store`, `Thumbs.db`
-   **Logs**: `*.log`

### `.husky/`
**Purpose**: Git hooks (pre-commit, commit-msg).

**Hooks**:
-   **commit-msg**: Validates commit message format (Conventional Commits).
-   **pre-commit**: Runs `lint-staged` (auto-fix linting).

### `commitlint.config.js`
**Purpose**: Commit message validation rules.

**Format**: `type(scope): subject`

**Allowed Types**:
-   `feat`: New feature
-   `fix`: Bug fix
-   `docs`: Documentation only
-   `refactor`: Code refactor (no functional change)
-   `test`: Add/modify tests
-   `chore`: Maintenance tasks
-   `ci`: CI/CD changes
-   `build`: Build system changes

**Example**:
```bash
✅ feat(oie): add LLMPlanner with action schema
✅ fix(memory): correct VRAM calculation for WebGPU
❌ added new feature  # Missing type
```

---

## 7. UI & Styling

### `tailwind.config.ts`
**Purpose**: Tailwind CSS theming and configuration.

**Custom Features**:
-   **Dark mode**: Class-based (`dark:` prefix).
-   **Theme colors**: Primary, secondary, accent, destructive.
-   **Custom animations**: Accordion, fade, slide.
-   **Typography plugin**: `@tailwindcss/typography`.

### `components.json`
**Purpose**: shadcn/ui component configuration.

**Settings**:
-   **Style**: Default
-   **Base color**: Slate
-   **CSS variables**: Enabled
-   **Tailwind config**: `tailwind.config.ts`

### `postcss.config.js`
**Purpose**: PostCSS plugins.

**Plugins**:
-   `tailwindcss`: Process Tailwind directives.
-   `autoprefixer`: Add vendor prefixes.

---

## 8. Platform-Specific

### `.replit`
**Purpose**: Replit IDE configuration.

**Features**:
-   Run command: `npm run dev`
-   Port: 8080
-   Language: Node.js

### `replit.md`
**Purpose**: Documentation for Replit-specific setup. See [replit.md](./replit.md).

---

## 9. GitHub Actions

### `.github/workflows/ci.yml`
**Purpose**: Continuous Integration pipeline.

**Jobs**:
1.  Lint
2.  Type Check
3.  Unit Tests
4.  Build (all modes)
5.  Format Check

**Triggers**: Push to `main`, `sprint-*` branches, or PRs.

---

## 10. Lockfiles Explained

### Why Multiple Lockfiles?

| File | Package Manager | Format | When to Use |
|------|----------------|--------|-------------|
| `package-lock.json` | npm | JSON | Default (npm install) |
| `bun.lock` | Bun | JSON | Readable format (bun install) |
| `bun.lockb` | Bun | Binary | Faster performance |

**Best Practice**: Commit all lockfiles to ensure consistent dependencies across environments.

---

## 11. Quick Reference

| Task | File to Edit |
|------|--------------|
| Add environment variable | `.env.example` → `.env` |
| Change TypeScript rules | `tsconfig.json` |
| Modify linting rules | `eslint.config.js` |
| Update formatting | `.prettierrc.json` |
| Add npm script | `package.json` (scripts) |
| Configure Tailwind theme | `tailwind.config.ts` |
| Exclude files from Git | `.gitignore` |
| Change commit rules | `commitlint.config.js` |

---

*For development workflows, see [DEVELOPER_GUIDE.md](./DEVELOPER_GUIDE.md).*
